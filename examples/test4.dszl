let destination = "";
let booking_number = "ğŸˆšï¸"; // something strange unicode character that cannot be input
let travel_date = "20231220";
let number_of_people = 2;
let special_requests = "";

state choose_destination() {
    output "è¯·é—®æ‚¨è®¡åˆ’å»å“ªé‡Œæ—…æ¸¸ï¼Ÿ";
    input destination;
    output "å¥½çš„ï¼Œæ‚¨é€‰æ‹©äº†" + destination + "ä½œä¸ºæ—…è¡Œç›®çš„åœ°ã€‚";
}

state gen_new_booking_number(date num) {
    booking_number = "BK" + date + "0" + num;
}

state book_trip() {
    branch (destination == "")
        output "è¯·å…ˆé€‰æ‹©æ—…è¡Œç›®çš„åœ°ã€‚";
    else {
        output "æ­£åœ¨ä¸ºæ‚¨é¢„è®¢" + destination + "ä¹‹è¡Œã€‚è¯·ç¨ç­‰...";
        sleep 2;
        gen_new_booking_number(travel_date number_of_people);
        output "é¢„è®¢æˆåŠŸï¼æ‚¨çš„é¢„è®¢å·ä¸ºï¼š" + booking_number + "ã€‚";
    }
}

state view_booking() {
    branch (booking_number == "ğŸˆšï¸")
        output "æ‚¨è¿˜æ²¡æœ‰é¢„è®¢ä»»ä½•æ—…è¡Œã€‚";
    else
        output "æ‚¨çš„é¢„è®¢ä¿¡æ¯å¦‚ä¸‹ï¼š[[LF]]æ—…è¡Œç›®çš„åœ°ï¼š" + destination + "[[LF]]æ—…è¡Œæ—¥æœŸï¼š" + travel_date + "[[LF]]äººæ•°ï¼š" + number_of_people + "[[LF]]ç‰¹åˆ«è¦æ±‚ï¼š" + special_requests;
}

state change_booking() {
    output "è¯·è¾“å…¥æ‚¨çš„é¢„è®¢å·ï¼š";
    let booking_number_i = "";
    input booking_number_i;
    branch (booking_number_i != booking_number) {
        output "é¢„è®¢å·ä¸åŒ¹é…ï¼";
    } else {
        output "æ‚¨æƒ³è¦æ›´æ”¹ä»€ä¹ˆä¿¡æ¯ï¼Ÿï¼ˆæ—…è¡Œæ—¥æœŸ / äººæ•° / ç‰¹åˆ«è¦æ±‚ï¼‰";
        let change_request = "";
        input change_request;
        branch (change_request == "æ—…è¡Œæ—¥æœŸ") {
            output "è¯·è¾“å…¥æ–°çš„æ—…è¡Œæ—¥æœŸï¼š";
            input travel_date;
        } else branch (change_request == "äººæ•°") {
            output "è¯·è¾“å…¥æ–°çš„äººæ•°ï¼š";
            input_num number_of_people;
        } else branch (change_request == "ç‰¹åˆ«è¦æ±‚") {
            output "è¯·æè¿°æ‚¨çš„ç‰¹åˆ«è¦æ±‚ï¼š";
            input special_requests;
        }
        gen_new_booking_number(travel_date number_of_people);
        output "æ‚¨çš„é¢„è®¢ä¿¡æ¯å·²æ›´æ–°ã€‚é¢„å®šå·ä¸º " + booking_number + "ã€‚";
    }
}

state cancel_booking() {
    output "è¯·è¾“å…¥æ‚¨è¦å–æ¶ˆçš„é¢„è®¢å·ï¼š";
    let booking_number_i = "";
    input booking_number_i;
    branch (booking_number_i != booking_number)
        output "é¢„è®¢å·ä¸åŒ¹é…ï¼";
    else {
        booking_number = "ğŸˆšï¸"; // something strange unicode character that cannot be input
        output "é¢„è®¢å·²å–æ¶ˆã€‚";
    }
}

state get_travel_advice() {
    output "è¯·è¾“å…¥æ‚¨æƒ³è¦å’¨è¯¢çš„æ—…è¡Œç›®çš„åœ°ï¼š";
    input destination;
    output "å…³äº" + destination + "çš„æ—…æ¸¸ä¿¡æ¯å¦‚ä¸‹...[[LF]]â€¦â€¦[[LF]]â€¦â€¦[[LF]]â€¦â€¦";
}

while (true) {
    output "æ¬¢è¿ä½¿ç”¨æ—…æ¸¸å’¨è¯¢æœåŠ¡ã€‚è¯·é€‰æ‹©æœåŠ¡ï¼šï¼ˆç›®çš„åœ°é€‰æ‹© / é¢„è®¢æ—…è¡Œ / æŸ¥çœ‹é¢„è®¢ / æ›´æ”¹é¢„è®¢ / å–æ¶ˆé¢„è®¢ / è·å–æ—…æ¸¸å»ºè®®ï¼‰";
    let cmd = "";
    input cmd;
    branch (cmd ~= "ç›®çš„åœ°é€‰æ‹©") choose_destination();
    else branch (cmd ~= "é¢„è®¢æ—…è¡Œ") book_trip();
    else branch (cmd ~= "æŸ¥çœ‹é¢„è®¢") view_booking();
    else branch (cmd ~= "æ›´æ”¹é¢„è®¢") change_booking();
    else branch (cmd ~= "å–æ¶ˆé¢„è®¢") cancel_booking();
    else branch (cmd ~= "è·å–æ—…æ¸¸å»ºè®®") get_travel_advice();
    else output "æ— æ³•è¯†åˆ«å‘½ä»¤ï¼Œè¯·é‡æ–°è¾“å…¥ã€‚";
}
